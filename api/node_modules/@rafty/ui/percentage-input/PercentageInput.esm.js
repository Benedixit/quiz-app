"use client";
import{_ as e}from"@swc/helpers/_/_extends";import{_ as r}from"@swc/helpers/_/_object_without_properties_loose";import{jsxs as t,jsx as l}from"react/jsx-runtime";import{ChevronUpIcon as n,ChevronDownIcon as o}from"@heroicons/react/24/outline";import{forwardRef as a}from"react";import{useFieldControlContext as s}from"../field-control/context.esm.js";import{getValue as i}from"../utils/get-value.esm.js";import{InputGroup as u}from"../input-group/InputGroup.esm.js";import{InputField as c}from"../input-field/InputField.esm.js";import{Suffix as m}from"../input-group/Suffix.esm.js";const p="percentage-input",d={ArrowUp:1,Enter:0,ArrowDown:-1},f=a((function(a,f){var b,{size:h="md",onChange:x,onKeyDown:g,onBlur:v,className:y}=a,N=r(a,["size","onChange","onKeyDown","onBlur","className"]);const w=null!=(b=s())?b:{isDisabled:!1,isLoading:!1,isReadOnly:!1,isRequired:!1,isInvalid:!1};var k,C,D;const _=(null!=(C=null!=(k=N.disabled)?k:i(N.isDisabled))?C:w.isDisabled)||(null!=(D=i(N.isLoading))?D:w.isLoading);var j,z;const I=null!=(z=null!=(j=N.readOnly)?j:i(N.isReadOnly))?z:w.isReadOnly;return t(u,{size:h,className:y,children:[l(c,e({},N,{id:p,type:"text",inputMode:"numeric",autoComplete:"off",autoCorrect:"off",spellCheck:"false",onChange:e=>{const r=e.currentTarget.value.replace(/[^%.0-9]/g,"");null==x||x(r)},onKeyDown:e=>{const r=e.currentTarget.value,t=Number(r.replace(/%/g,""));if(e.key in d){e.preventDefault(),e.stopPropagation();const r=d[e.key];let l=t;-1===r?l=Math.max(t+r,0):1===r&&(l=Math.min(t+r,100)),null==x||x(`${l}%`)}else null==g||g(e)},onBlur:e=>{const r=e.currentTarget.value,t=Number(r.replace(/%/g,""));null==x||x(`${t}%`),null==v||v(e)},ref:f})),l(m,{className:"pointer-events-auto w-max",children:t("div",{className:"flex flex-col",children:[l("button",{type:"button",tabIndex:-1,"aria-label":"increase",className:"text-secondary-500 px-2 py-0.5 hover:text-black dark:hover:text-white","aria-controls":p,onClick:()=>{var e;const r=Number((null!=(e=N.value)?e:"0").replace(/%/g,""));null==x||x(`${r+1}%`)},disabled:_||I,children:l(n,{className:"size-2.5 stroke-[3]"})}),l("button",{type:"button",tabIndex:-1,"aria-label":"decrease",className:"text-secondary-500 px-2 py-0.5 hover:text-black dark:hover:text-white","aria-controls":p,onClick:()=>{var e;const r=Number((null!=(e=N.value)?e:"0").replace(/%/g,""));null==x||x(`${r-1}%`)},disabled:_||I,children:l(o,{className:"size-2.5 stroke-[3]"})})]})})]})}));export{f as PercentageInput};
