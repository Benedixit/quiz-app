import{jsx as e,jsxs as r}from"react/jsx-runtime";import{CheckIcon as a}from"@heroicons/react/24/outline";import{useFieldControlContext as s,getValue as l,ScrollArea as i,classNames as d,ScrollAreaList as n,eventHandler as o}from"@rafty/ui";import{cva as t}from"class-variance-authority";import{forwardRef as c,useReducer as u,useEffect as m}from"react";const y=t("dark:text-secondary-100 dark:border-secondary-700 border-secondary-300 select-none flex items-center justify-between border-b px-4 transition-all ease-in-out",{variants:{size:{sm:"text-xs",md:"text-sm",lg:"text-base"},disabled:{true:"",false:""},selected:{true:"",false:""},readOnly:{true:"",false:""},loading:{true:"",false:""}},compoundVariants:[{selected:!0,className:"bg-primary-50/60 dark:bg-primary-900"},{selected:!0,disabled:!1,loading:!1,className:"hover:bg-primary-50 dark:hover:bg-primary-800"},{loading:!0,className:""},{disabled:!1,selected:[!0,!1],readOnly:!1,loading:!1,className:"cursor-pointer"},{disabled:!1,readOnly:[!0,!1],selected:!1,loading:!1,className:"hover:bg-secondary-100/60 dark:hover:bg-secondary-800"}]}),b=t("dark:border-secondary-700 border-secondary-300 dark:bg-secondary-900 w-full overflow-hidden rounded-md border bg-white",{variants:{size:{sm:"h-[135px]",md:"h-[180px]",lg:"h-[225px]"},disabled:{true:"cursor-not-allowed opacity-70",false:""},loading:{true:"cursor-progress opacity-70",false:""}}}),g=t("stroke-2",{variants:{size:{sm:"size-3.5",md:"size-4",lg:"size-[18px]"},loading:{true:"stroke-secondary-500/70 dark:stroke-secondary-400",false:"stroke-primary-500 dark:stroke-primary-300"},disabled:{true:"stroke-secondary-500/70 dark:stroke-secondary-400",false:"stroke-primary-500 dark:stroke-primary-300"}}}),p={size:{sm:30,md:40,lg:50}},f=c((function({name:t,items:c,className:f,isHidden:v,isDisabled:k,isLoading:h,isReadOnly:x,itemSize:z,defaultValue:N,onValueChange:O,type:w,value:D,size:R="md"},C){var L;const V=null!=(L=s())?L:{isDisabled:!1,isLoading:!1,isReadOnly:!1,isRequired:!1,isInvalid:!1},j=null!=D?D:N,A=j?Array.isArray(j)?j:[j]:[],S="multi"===w,[q,H]=u(((e,r)=>{let a=[...e];return S?a.includes(r)?a=a.filter((e=>e!==r)):a.push(r):a=[r],a}),A);var I;const K=null!=(I=l(k))?I:V.isDisabled;var B;const E=null!=(B=l(h))?B:V.isLoading;var F;const G=null!=(F=l(x))?F:V.isReadOnly,J=l(v);m((()=>{S?null==O||O(q):null==O||O(q.length>0?q[0]:void 0)}),[q]);const M=e=>{if(G||K||E)return;const r=c[e].value;return o((()=>H(r)))};var P;return e(i,{id:t,hidden:J,itemCount:c.length,itemSize:null!=(P=p.size[R])?P:z,className:d(b({disabled:K,loading:E,size:R}),f),ref:C,children:e(n,{children:({index:s,style:l})=>{const i=q.includes(c[s].value);var d;return r("div",{onClick:M(s),onKeyDown:M(s),className:y({disabled:K,selected:i,readOnly:G,loading:E,size:R}),style:l,children:[null!=(d=c[s].label)?d:c[s].value,i&&e(a,{className:g({size:R,disabled:K,loading:E})})]},s)}})})}));export{f as Listbox};
